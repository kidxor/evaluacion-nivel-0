<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Aplicación de Evaluación</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Encabezado moderno */
    header {
      background: linear-gradient(90deg, #2563eb 0%, #38bdf8 100%);
      color: #fff;
      padding: 2rem 0 1.5rem 0;
      text-align: center;
      border-radius: 0 0 2rem 2rem;
      box-shadow: 0 4px 24px rgba(59,130,246,0.10);
      margin-bottom: 2rem;
    }
    header h1 {
      font-family: 'Montserrat', Arial, sans-serif;
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: 1px;
      margin: 0;
    }
    header p {
      font-size: 1.15rem;
      font-weight: 400;
      margin-top: 0.7rem;
      color: #e0e7ff;
    }
    /* Modal estilos */
    .modal-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(37,99,235,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-box {
      background: #fff;
      border-radius: 1.2rem;
      box-shadow: 0 4px 24px rgba(59,130,246,0.15);
      padding: 2rem 2.5rem;
      max-width: 350px;
      width: 100%;
      text-align: center;
      animation: fadeIn 0.3s;
    }
    .modal-box h2 {
      color: #2563eb;
      margin-bottom: 1.2rem;
      font-size: 1.3rem;
      font-weight: 700;
    }
    .modal-box label {
      display: block;
      margin-bottom: 1rem;
      text-align: left;
      font-weight: 500;
      color: #374151;
    }
    .modal-box input[type="text"] {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #dbeafe;
      border-radius: 0.5rem;
      font-size: 1rem;
      margin-top: 0.3rem;
      margin-bottom: 1rem;
    }
    .modal-box button {
      background: #2563eb;
      color: #fff;
      border: none;
      padding: 0.7rem 2rem;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 1rem;
      transition: background 0.2s;
    }
    .modal-box button:hover {
      background: #1d4ed8;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95);}
      to { opacity: 1; transform: scale(1);}
    }
    @media (max-width: 600px) {
      header h1 { font-size: 1.3rem; }
      header p { font-size: 1rem; }
      header { padding: 1.2rem 0 1rem 0; }
      .modal-box { padding: 1.2rem 1rem; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Evaluación de Conocimientos</h1>
    <p>Completa el formulario y obtén tu resultado al instante.<br>
    <span style="font-size:0.95em;">¡Revisa tus respuestas y consulta la lista de evaluados!</span></p>
  </header>
  
  <!-- Modal para nombre y apellido -->
  <div id="userModal" class="modal-bg">
    <form id="userForm" class="modal-box" autocomplete="off">
      <h2>Ingresa tus datos</h2>
      <label>
        Nombre:
        <input type="text" id="modalFirstName" required autocomplete="given-name">
      </label>
      <label>
        Apellido:
        <input type="text" id="modalLastName" required autocomplete="family-name">
      </label>
      <button type="submit">Comenzar evaluación</button>
    </form>
  </div>

  <main style="display:none;" id="mainContent">
    <form id="quizForm">
      <input type="hidden" id="firstName">
      <input type="hidden" id="lastName">
      <div id="questionsContainer"></div>
      <button type="submit">Enviar</button>
    </form>

    <div id="resultModal" class="modal" style="display:none;">
      <div class="modal-content">
        <span id="modalText"></span>
        <button class="close-btn" onclick="closeModal()">Cerrar</button>
      </div>
    </div>

    <div id="evaluadosList"></div>
    <a href="evaluados.html" style="display:block;margin:2rem auto;text-align:center;font-weight:bold;color:#2563eb;">Ver lista de evaluados</a>
  </main>

  <script>
    // Lista completa de preguntas y opciones
    const preguntas = [
      {
        id: "q1",
        texto: "¿Qué necesito para poder comenzar a trabajar como conductor en Autonomy? (Podés elegir más de una)",
        tipo: "checkbox",
        opciones: [
          { value: "a", label: "Tener ganas de aprender" },
          { value: "b", label: "Licencia de conducir vigente" },
          { value: "c", label: "Auto propio" },
          { value: "d", label: "Certificado de antecedentes penales" },
          { value: "e", label: "Comprobante de domicilio" },
          { value: "f", label: "Pasaporte vigente" }
        ]
      },
      {
        id: "q2",
        texto: "¿Por qué es importante asistir y aprobar esta capacitación?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Para recibir un diploma" },
          { value: "b", label: "Para acceder a un vehículo Autonomy y poder comenzar a generar ingresos" },
          { value: "c", label: "Porque es obligatorio para cualquier trabajo" },
          { value: "d", label: "Para conocer a otros conductores" }
        ]
      },
      {
        id: "q3",
        texto: "¿Qué significa ser conductor de aplicaciones?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Ser jefe de uno mismo y administrar tu propio negocio" },
          { value: "b", label: "Ser empleado de la app" },
          { value: "c", label: "Manejar cuando te obligan" }
        ]
      },
      {
        id: "q4",
        texto: "¿Cuáles son algunos de los costos que debo tener en cuenta para administrar con eficiencia mi negocio y alcanzar mis objetivos de ganancias?",
        tipo: "checkbox",
        opciones: [
          { value: "a", label: "Las comisiones de las aplicaciones" },
          { value: "b", label: "Peajes, combustible, lavado, alquiler del vehículo" },
          { value: "c", label: "Almuerzos y meriendas" },
          { value: "d", label: "Gastos en ropa nueva" }
        ]
      },
      {
        id: "q5",
        texto: "¿Qué es lo primero que debo hacer antes de comenzar mi jornada de trabajo? (Podés elegir más de una)",
        tipo: "checkbox",
        opciones: [
          { value: "a", label: "Asegurarme de tener el tanque lleno y el auto limpio y en condiciones" },
          { value: "b", label: "Subir una foto en redes sociales" },
          { value: "c", label: "Pedirle a alguien que maneje por mí" },
          { value: "d", label: "Verificar en el celular: batería, conexión, datos y llevar cable de carga" }
        ]
      },
      {
        id: "q6",
        texto: "¿Qué significa conducir de forma segura y responsable?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Usar el celular mientras manejo para aceptar más viajes" },
          { value: "b", label: "Respetar las normas de tránsito y cuidar a los pasajeros" },
          { value: "c", label: "Llegar lo más rápido posible, sin importar las señales" }
        ]
      },
      {
        id: "q7",
        texto: "¿Por qué es importante mantener limpio y en buen estado el vehículo?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Porque da una buena impresión y ayuda a recibir mejores calificaciones" },
          { value: "b", label: "Porque los autos limpios andan más rápido" },
          { value: "c", label: "Porque si no, no me van a dejar trabajar nunca más" }
        ]
      },
      {
        id: "q8",
        texto: "¿Qué debo hacer si tengo un accidente de tránsito?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Irme lo más rápido posible" },
          { value: "b", label: "Verificar que todos estén bien y seguir los pasos legales correspondientes" },
          { value: "c", label: "Llamar al pasajero para pedirle que lo reporte él" }
        ]
      },
      {
        id: "q9",
        texto: "¿Qué aplicaciones debería conocer y aprender a usar como conductor de movilidad?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "MercadoLibre, YouTube y WhatsApp" },
          { value: "b", label: "Uber, Cabify, DiDi" },
          { value: "c", label: "Word, Excel y Google Docs" }
        ]
      },
      {
        id: "q10",
        texto: "¿Qué significa \"MultiApping Inteligente\"?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Trabajar solo con una app para no confundirme" },
          { value: "b", label: "Usar varias aplicaciones, eligiendo la mejor opción según cada momento" },
          { value: "c", label: "Aceptar muchos viajes al mismo tiempo" }
        ]
      },
      {
        id: "q11",
        texto: "¿Qué cosas me ayudan a ganar más dinero con mi trabajo? (Podés elegir más de una)",
        tipo: "checkbox",
        opciones: [
          { value: "a", label: "Administrar mis horarios y descansos" },
          { value: "b", label: "Conocer los momentos de alta demanda (eventos, clima, feriados)" },
          { value: "c", label: "Trabajar 24 horas seguidas sin parar" },
          { value: "d", label: "Organizar mis finanzas y gastos" }
        ]
      },
      {
        id: "q12",
        texto: "¿Qué espera un pasajero de un conductor profesional?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Amabilidad, respeto y un viaje seguro" },
          { value: "b", label: "Que le presten el auto" },
          { value: "c", label: "Que llegue rápido sin importar cómo" }
        ]
      },
      {
        id: "q13",
        texto: "¿Qué puedo ganar si doy un buen servicio?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Propinas, buenas calificaciones, más y mejores viajes asignados" },
          { value: "b", label: "Menos horas de trabajo" },
          { value: "c", label: "Nada, da lo mismo hacerlo bien o mal" }
        ]
      },
      {
        id: "q14",
        texto: "Si un pasajero se enoja o tiene una queja, ¿qué debo hacer?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Decirle a los gritos que está equivocado" },
          { value: "b", label: "Escuchar con calma, mantener la cortesía y buscar resolver el problema" },
          { value: "c", label: "Cancelar el viaje y dejarlo donde esté" }
        ]
      },
      {
        id: "q15",
        texto: "¿Qué tiempo me llevará consolidar mi negocio y alcanzar mis objetivos?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Lo voy a lograr la primer semana porque soy genial" },
          { value: "b", label: "El avance será progresivo y lo importante es la constancia" },
          { value: "c", label: "Mis objetivos son inalcanzables y tardaré muchos años" }
        ]
      },
      {
        id: "q16",
        texto: "¿Cuántas veces al día puedo hacer una pausa en mi trabajo? (Podés elegir más de una)",
        tipo: "checkbox",
        opciones: [
          { value: "a", label: "Al cargar combustible y cuando necesito ir al baño o comer algo" },
          { value: "b", label: "Las veces que yo disponga porque soy mi propio jefe" },
          { value: "c", label: "Debo trabajar 12 horas seguidas sin parar" },
          { value: "d", label: "Tengo que pedir permiso para no ser sancionado" }
        ]
      },
      {
        id: "q17",
        texto: "¿Quién decide el valor de las ganancias de mi negocio?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Decido yo con mi organización, mis decisiones y mi estrategia" },
          { value: "b", label: "Las aplicaciones cuando fijan las tarifas de los viajes" },
          { value: "c", label: "Las empresas proveedoras de combustible" }
        ]
      },
      {
        id: "q18",
        texto: "¿Cuánto incide mi forma de conducir en mis ganancias?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Nada, la ganancia depende del valor de los viajes y las horas al volante" },
          { value: "b", label: "Muy poco porque lo que importa es mi rapidez para hacer muchos viajes" },
          { value: "c", label: "Mucho porque las multas las pago yo, además los pasajeros califican y denuncian en las aplicaciones a los conductores temerarios" }
        ]
      },
      {
        id: "q19",
        texto: "Si tengo una queja o un problema con una aplicación, ¿qué debo hacer?",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Llamar a Autonomy para que ellos se ocupen de todo" },
          { value: "b", label: "Resolver yo mismo, comunicándome con atención al cliente porque soy el jefe de mi propio negocio" },
          { value: "c", label: "Enojarme y no trabajar más" }
        ]
      },
      {
        id: "q20",
        texto: "¿Cómo me siento luego de esta capacitación? (Elegí la opción que más se acerca a tu realidad)",
        tipo: "radio",
        opciones: [
          { value: "a", label: "Más preparado para comenzar a trabajar" },
          { value: "b", label: "Todavía tengo dudas, pero quiero seguir aprendiendo" },
          { value: "c", label: "No me interesa trabajar como conductor" }
        ]
      }
    ];

    // Respuestas correctas
    const correctas = {
      q1: ['a', 'b', 'd', 'e'],
      q2: 'b',
      q3: 'a',
      q4: ['a', 'b'],
      q5: ['a', 'd'],
      q6: 'b',
      q7: 'a',
      q8: 'b',
      q9: 'b',
      q10: 'b',
      q11: ['a', 'b', 'd'],
      q12: 'a',
      q13: 'a',
      q14: 'b',
      q15: 'b',
      q16: ['a', 'b'],
      q17: 'a',
      q18: 'c',
      q19: 'b',
      q20: null // Reflexión, no se evalúa
    };

    function renderPreguntas() {
      const container = document.getElementById('questionsContainer');
      container.innerHTML = preguntas.map(p => {
        if (p.tipo === "checkbox") {
          return `
            <div class="question">
              <p><b>${p.texto}</b></p>
              ${p.opciones.map(o =>
                `<label><input type="checkbox" name="${p.id}" value="${o.value}"> ${o.label}</label>`
              ).join('')}
            </div>
          `;
        } else if (p.tipo === "radio") {
          return `
            <div class="question">
              <p><b>${p.texto}</b></p>
              ${p.opciones.map(o =>
                `<label><input type="radio" name="${p.id}" value="${o.value}" required> ${o.label}</label>`
              ).join('')}
            </div>
          `;
        }
        return '';
      }).join('');
    }

    document.getElementById('userForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const nombre = document.getElementById('modalFirstName').value.trim();
      const apellido = document.getElementById('modalLastName').value.trim();
      if (!nombre || !apellido) return;
      document.getElementById('firstName').value = nombre;
      document.getElementById('lastName').value = apellido;
      document.getElementById('userModal').style.display = 'none';
      document.getElementById('mainContent').style.display = 'block';
      renderPreguntas();
    });

    document.getElementById('quizForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const nombre = document.getElementById('firstName').value;
      const apellido = document.getElementById('lastName').value;
      const respuestas = {};
      preguntas.forEach(p => {
        if (p.tipo === "checkbox") {
          respuestas[p.id] = Array.from(document.querySelectorAll(`input[name="${p.id}"]:checked`)).map(i => i.value);
        } else if (p.tipo === "radio") {
          const val = document.querySelector(`input[name="${p.id}"]:checked`);
          respuestas[p.id] = val ? val.value : '';
        }
      });
      // Calcular puntaje
      let score = 0;
      let total = 19; // Solo 19 preguntas se evalúan
      // Evaluación
      Object.keys(correctas).forEach(q => {
        if (correctas[q] === null) return; // No se evalúa
        if (Array.isArray(correctas[q])) {
          if (Array.isArray(respuestas[q]) &&
              respuestas[q].sort().join(',') === correctas[q].sort().join(',')) score++;
        } else {
          if (respuestas[q] === correctas[q]) score++;
        }
      });
      const percent = Math.round((score / total) * 100);
      const passed = percent >= 70;
      // Guardar en localStorage
      const evaluados = JSON.parse(localStorage.getItem('evaluados') || '[]');
      evaluados.push({
        nombre,
        apellido,
        fecha: new Date().toLocaleString(),
        score,
        total,
        percent,
        passed,
        respuestas
      });
      localStorage.setItem('evaluados', JSON.stringify(evaluados));
      // Mostrar resultado inmediato
      const modal = document.getElementById('resultModal');
      document.getElementById('modalText').innerHTML =
        `<b>${nombre} ${apellido}</b>, obtuviste <b>${score}</b> de <b>${total}</b> (${percent}%).<br>
        <span style="color:${passed ? '#16a34a' : '#dc2626'}; font-weight:bold;">
          ${passed ? 'Aprobado ✅' : 'No aprobado ❌'}
        </span>`;
      modal.style.display = 'block';
    });

    function closeModal() {
      document.getElementById('resultModal').style.display = 'none';
    }
  </script>
</body>
</html>